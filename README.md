# DOOM Forge App for Jira & Confluence

A doomgeneric WebAssembly port packaged as a Forge app for Atlassian Jira and Confluence. This is the actual DOOM game engine compiled to WebAssembly with shareware WAD file support.

## Features

- üéÆ Authentic DOOM gameplay via doomgeneric port
- üïπÔ∏è WebAssembly-powered performance
- üì¶ Includes shareware Episode 1 (doom1.wad)
- üéµ Full sound and music support
- ‚å®Ô∏è Classic DOOM controls
- üåê Runs entirely in the browser
- üöÄ Simple build process with automated script

## Quick Start

### Prerequisites

1. Install the Forge CLI:
```bash
npm install -g @forge/cli
```

2. Install Emscripten:
```bash
# macOS
brew install emscripten

# Linux - see WASM_BUILD_INSTRUCTIONS.md
```

### Build and Deploy

1. **Build DOOM files** (automated):
```bash
chmod +x build-doom.sh
./build-doom.sh
```

This script will:
- Clone the doomgeneric repository
- Download doom1.wad (shareware)
- Compile to WebAssembly
- Copy files to the correct locations

2. **Login to Forge**:
```bash
forge login
```

3. **Register the app** (first time only):
```bash
forge register
```

4. **Deploy**:
```bash
forge deploy
```

5. **Install to your site**:
```bash
forge install
```

## Controls

- **‚Üë / W** - Move Forward
- **‚Üì / S** - Move Backward
- **‚Üê / ‚Üí** - Turn Left/Right
- **A / D** - Strafe Left/Right
- **Ctrl** - Fire
- **Space** - Use/Open
- **1-7** - Select Weapon
- **ESC** - Menu

## How It Works

### doomgeneric

This app uses doomgeneric, a highly portable DOOM source port specifically designed for easy porting to different platforms. It's compiled to WebAssembly using Emscripten, allowing it to run natively in the browser with full sound and music support.

### WebAssembly Integration

1. **Emscripten**: Compiles C DOOM source code to WASM
2. **Virtual File System**: Loads doom1.wad into Emscripten's virtual filesystem
3. **SDL2**: Provides graphics, input, and audio through browser APIs
4. **Canvas Rendering**: Game renders to HTML5 Canvas element

### Forge Integration

- **Custom UI Resources**: Static files hosted by Atlassian infrastructure
- **Global Pages**: Accessible from Jira and Confluence app menus
- **Issue Glance**: Optional DOOM launcher in Jira issues (because why not?)

## Accessing the Game

### In Jira

1. Click the "Apps" dropdown in the top navigation
2. Select "DOOM" from the menu
3. Or view the glance panel on any issue

### In Confluence

1. Click the "Apps" dropdown in the top navigation
2. Select "DOOM" from the menu

## Technical Stack

- **Forge Platform**: Atlassian's serverless app framework
- **doomgeneric**: Easily portable DOOM source port
- **WebAssembly**: Native-speed game engine execution
- **Emscripten**: C to WASM compiler toolchain
- **SDL2**: Cross-platform multimedia library

## File Structure

```
forge-doom-app/
‚îú‚îÄ‚îÄ manifest.yml                    # Forge app configuration
‚îú‚îÄ‚îÄ package.json                    # Node dependencies
‚îú‚îÄ‚îÄ build-doom.sh                   # Automated build script
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ index.js                   # Forge resolver function
‚îú‚îÄ‚îÄ static/doom/
‚îÇ   ‚îú‚îÄ‚îÄ index.html                 # Game launcher page
‚îÇ   ‚îú‚îÄ‚îÄ doomgeneric.js             # Emscripten JS (generated by build)
‚îÇ   ‚îú‚îÄ‚îÄ doomgeneric.wasm           # WASM binary (generated by build)
‚îÇ   ‚îî‚îÄ‚îÄ doomgeneric.data           # Packaged game data (generated by build)
‚îú‚îÄ‚îÄ build/                         # Build artifacts (gitignored)
‚îÇ   ‚îî‚îÄ‚îÄ doomgeneric/              # Cloned repository
‚îî‚îÄ‚îÄ WASM_BUILD_INSTRUCTIONS.md     # Detailed build guide
```

## Building from Source

### Automated Build (Recommended)

```bash
./build-doom.sh
```

The script handles everything:
- Clones doomgeneric repository
- Downloads doom1.wad shareware
- Compiles with Emscripten
- Copies files to static/doom/

### Manual Build

See `WASM_BUILD_INSTRUCTIONS.md` for detailed manual build instructions.

## Development

### Local Testing

```bash
# Start local tunnel
forge tunnel

# Access at the provided URL
```

### Modifying the Game

The actual game logic is in the compiled WASM. To modify:

1. Edit source in `build/doomgeneric/doomgeneric/`
2. Rebuild: `./build-doom.sh` or `make -f Makefile.emscripten`
3. Redeploy: `forge deploy`

### Customizing the UI

Edit `static/doom/index.html` to customize:
- Loading screens
- Control instructions
- Canvas styling
- Emscripten Module configuration

## File Size Considerations

Total app size: ~5.5 MB

- doomgeneric.js: ~50-100 KB
- doomgeneric.wasm: ~1.2 MB  
- doomgeneric.data: ~4.3 MB (includes doom1.wad and assets)

This is within Forge's static resource limits.

## Performance

- Native WASM execution speed
- 35 FPS (original DOOM framerate)
- Resolution: 320x200 (scaled to canvas)
- Works on desktop and mobile browsers

## License

GPL-2.0 License

This project uses:
- doomgeneric source port (GPL-2.0)
- Original DOOM game engine by id Software
- Shareware episode freely available

## Credits

- **id Software**: Original DOOM (1993)
- **ozkl**: doomgeneric portable DOOM implementation
- **Emscripten Team**: C/C++ to WebAssembly compiler

## Troubleshooting

**Build fails:**
- Ensure Emscripten is installed: `emcc --version`
- Check that you have git and make installed
- Try running `./build-doom.sh` again

**Files not loading:**
- Verify all files exist in `static/doom/`
- Check browser console for errors
- Run `ls -lh static/doom/` to verify files

**Game won't start:**
- Click on canvas to give it focus
- Check that build completed successfully
- Verify WASM files compiled correctly
- Check browser console for JavaScript errors

**Performance issues:**
- Close other browser tabs
- Try a different browser (Chrome/Firefox recommended)
- Check browser WebAssembly support

## Resources

- [doomgeneric GitHub](https://github.com/ozkl/doomgeneric)
- [Live Demo](https://ozkl.github.io/doomgeneric/)
- [Emscripten Documentation](https://emscripten.org/)
- [Forge Developer Guide](https://developer.atlassian.com/platform/forge/)
- [DOOM Wiki](https://doomwiki.org/)

## FAQ

**Q: Why doomgeneric instead of Chocolate Doom?**
A: doomgeneric has a simpler build process and better Emscripten 4.x support. It's specifically designed for easy porting.

**Q: Can I use the full version of DOOM?**
A: Yes! Replace doom1.wad with doom.wad (registered version) before building.

**Q: Does this work on mobile?**
A: The game loads on mobile browsers but controls are designed for keyboard/mouse.

**Q: Can I add custom WADs?**
A: Yes, but you'll need to modify the build process to package additional WAD files.

---

**Note**: This is an authentic DOOM implementation using the original game engine compiled to WebAssembly, not a recreation. You're playing the real DOOM!
